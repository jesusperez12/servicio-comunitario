{"version":3,"sources":["_projects_list.js","_modal-edit-project.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"_projects_list.js","sourcesContent":["$(document).ready(function() {\n    var table_list_projects = null;\n    Pace.track(function() {\n        table_list_projects = $(\"#table-list-projects\").DataTable({\n            ajax: '/admin/profesor/project/all',\n            dom: '<\"row\"<\"col-sm-6 project-list-items\"f>>tp',\n            drawCallback: function(settings) {\n                var api = this.api();\n                $.each(api.rows().nodes(), function(x, tr){\n                    $(tr).find('[data-toggle=tooltip]').tooltip();\n                    // FUNCTION LOAD PROYECTO\n                    $(tr).find('.btn-load-proyecto').off('click').on('click', function(e) {\n                        e.preventDefault();\n                        var id = $(this).data('id');\n                        var tr_n = $(tr).closest('tr');\n                        var row = api.row( tr_n );\n                        if($(this).hasClass('active')) {\n                            row.child.hide(\"slow\");\n                            $(this).removeClass('active');\n                            return;\n                        }\n                        $(this).parent().find('a').removeClass('active');\n                        $(this).addClass('active');\n                        if(row.child.isShown()){\n                            row.child.hide(\"slow\");\n                        }\n                        row.child( show_view_proyecto(row.data()) ).show();\n                        tr_n.next().find(\".view_html\").slideDown(200);\n                    });\n                    // FUNCTION EDIT PROYECTO\n                    $(tr).find('.btn-edit-proyecto').off('click').on('click', function(e) {\n                        e.preventDefault();\n                        var id = $(this).data('id');\n                        Pace.track(function () {\n                            $.ajax({\n                                url: '/admin/profesor/project/edit/' + id,\n                                type: 'GET',\n                                dataType: 'JSON',\n                            })\n                            .done(function(rs) {\n                                if (rs.response == 'ok') {\n                                    FormEditProject.dom.selectEspecialidad.trigger('initSelectEspecialidades', {especialidades: rs.data.especialidades});\n                                    FormEditProject.dom.formEditProject.trigger('loadForm', rs.data);\n                                }\n                            })\n                            .fail(function(jqXHR) {\n                                Utils.displayErrors(jqXHR);\n                            })\n                        })\n                    });\n                    // FUNCTION DELETE PROYECTO\n                    $(tr).find('.btn-delete-proyecto').off('click').on('click', function(e) {\n                        e.preventDefault();\n                        var id = $(this).data('id');\n                        swal({\n                            title: \"Estas seguro?\",\n                            text: \"Esta acción no se podrá deshacer.<br><br>\",\n                            html: true,\n                            type: \"warning\",\n                            showCancelButton: true,\n                            confirmButtonColor: \"#DD6B55\",\n                            confirmButtonText: \"Si, eliminar!\",\n                            closeOnConfirm: false\n                        },\n                        function () {\n                            Pace.track(function () {\n                                // Ajax request\n                                $.ajax({\n                                    url: '/admin/profesor/project/delete/' + id,\n                                    type: 'GET',\n                                    dataType: 'JSON',\n                                    beforeSend: function () {\n                                        swal.disableButtons();\n                                    },\n                                    success: function (rs) {\n                                        if (rs.response == \"ok\") {\n                                            swal(\"Eliminado!\", \"El proyecto se ha eliminado con éxito.\", \"success\");\n                                            // REFRESH TABLE\n                                            table_list_projects.ajax.reload();\n                                        }\n                                    },\n                                    error: function (jqXHR) {\n                                        Utils.displayErrors(jqXHR);\n                                    }\n                                })\n                            })\n                            // /.PACE\n                        })\n                    });\n                })\n            },\n            initComplete: function (settings, json) {\n                // FILTRO\n                $(\".project-list-items\").find('[type=search]').removeClass(\"input-sm\")\n                    .css({\n                        \"width\": \"100%\",\n                        \"margin-left\": 0\n                    })\n                    .parents(\"label\").css({\n                        \"width\": \"100%\"\n                    });\n            },\n            searchDelay: 350,\n            ordering : false,\n            pagingType: \"simple_numbers\",\n            pageLength: 8,\n            lengthChange: false,\n            searching: true,\n            info: false,\n            displayStart: 0,\n            autoWidth: false,\n            language: {\n                loadingRecords: \"Cargando...\",\n                emptyTable:     \"No hay proyectos registrados por usted\",\n                info:           \"Mostrando _START_ a _END_ de _TOTAL_ registros\",\n                infoEmpty:      \"Mostrando 0 a 0 de 0 registros\",\n                zeroRecords:    \"No se encontraron proyectos...\",\n                search: \"\",\n                searchPlaceholder: \"Buscar en lista de proyectos...\",\n                infoFiltered: \" - filtrado para _MAX_ registros\",\n                paginate: {\n                    first:      \"Primero\",\n                    last:       \"Último\",\n                    next:       \"Siguiente\",\n                    previous:   \"Anterior\"\n                }\n            },\n            columns: [\n                {\n                    className: 'project',\n                    data: 'nombre_proyecto',\n                    render: function(data, type, row) {\n                        \n                        var project = \"<div class='p-title'>\"+ row.nombre_proyecto +\"</div>\"\n                        + \"<div class='p-autor'>\"\n                        + \"<strong>Autor: </strong>\" + row.user.firstname + \" \" + row.user.primary_lastname\n                        project += \"</div>\";\n                        return project;\n                    }\n                },\n                {\n                    className: 'p-actions',\n                    data: 'especialidad',\n                    render: function(data, type, row) {\n                        var actions = \"<a href='#!' class='btn btn-default btn-xs btn-action btn-load-proyecto' data-id='\"+ row.id +\"' data-toggle='tooltip' data-placement='top' data-title='Ver detalles del proyecto'><i class='fa fa-eye'></i></a>\"\n                            + \"<a href='#!' class='btn btn-warning btn-xs btn-action btn-edit-proyecto' data-id='\" + row.id +\"' data-toggle='tooltip' data-placement='top' data-title='Editar proyecto'><i class='fa fa-pencil'></i></a>\"\n                            + \"<a href='#!' class='btn btn-danger btn-xs btn-action btn-delete-proyecto' data-id='\" + row.id +\"' data-toggle='tooltip' data-placement='top' data-title='Eliminar'><i class='fa fa-trash'></i></a>\";\n                        return actions;\n                    }\n                },\n            ]\n        })\n    })\n\n    function show_view_proyecto(data) {\n        if(Object.keys(data).length > 0) {\n            var box = '<div class=\"view_html\" style=\"display: none;\">'\n                box += '<table class=\"table table-condensed table-bordered\" style=\"margin-bottom:-1px;\">'+\n                        '<tr class=\"view_info warning\">'+\n                            '<td colspan=\"2\" style=\"font-weight:bold;text-align:center;\">DETALLES DEL PROYECTO</td>'+\n                        '</tr>'+\n                        '<tr class=\"view_info\">'+\n                            '<td style=\"width:110px;font-weight:bold;text-align:right;\">Descripción</td>'+\n                            '<td>'+ data.descripcion +'</td>'+\n                        '</tr>'+\n                        '<tr class=\"view_info\">'+\n                            '<td style=\"font-weight:bold;text-align:right;\">Línea de acción</td>'+\n                            '<td>'+ data.linea_accion +'</td>'+\n                        '</tr>'+\n                        '<tr class=\"view_info\">'+\n                            '<td style=\"font-weight:bold;text-align:right;\">Fundamentación</td>'+\n                            '<td>'+ data.fundamentacion +'</td>'+\n                        '</tr>'+\n                        '<tr class=\"view_info\">'+\n                            '<td style=\"font-weight:bold;text-align:right;\">Propósito</td>'+\n                            '<td>'+ data.proposito +'</td>'+\n                        '</tr>'+\n                        '<tr class=\"view_info\">'+\n                            '<td style=\"font-weight:bold;text-align:right;\">Competencia</td>'+\n                            '<td>'+ data.competencia +'</td>'+\n                        '</tr>'+\n                        '<tr class=\"view_info\">'+\n                            '<td style=\"font-weight:bold;text-align:right;\">Metodología</td>'+\n                            '<td>'+ data.metodologia +'</td>'+\n                        '</tr>'+\n                        '<tr class=\"view_info\">'+\n                            '<td style=\"font-weight:bold;text-align:right;\">Referencias</td>'+\n                            '<td>'+\n                            '<ul>'; \n                            $.each(data.referencias, function(i, referencia) {\n                                box += '<li>'+referencia.referencia+'</li>';\n                            }); \n                            box += '</ul>'+\n                            '</td>'+\n                        '</tr>'+\n                        '</table>'+\n                    '</div>';\n            return box;\n        }else{\n            return;\n        }\n    }\n\n    function show_form_asign_proyecto(data) {\n        if(data) {\n            var box = '<div class=\"view_html\" style=\"display: none;\">'\n            + data\n            + '</div>';\n            return box;\n        }else{\n            return;\n        }\n    }\n\n    // Activate link\n    var url = $(\"#url-active\").data(\"url-active\");\n    global.url_active(url);\n\n    // // ./CKEDITOR\n    CKEDITOR.replace('descripcion', {\n        customConfig: '/assets/js/customs/ckeditor_add_project_config.js'\n    });\n\n    CKEDITOR.instances.descripcion.on('fileUploadRequest', function (evt) {\n        var fileLoader = evt.data.fileLoader,\n            formData = new FormData(),\n            xhr = fileLoader.xhr;\n\n        xhr.open('POST', fileLoader.uploadUrl, true);\n        xhr.setRequestHeader('X-CSRF-TOKEN', $('meta[name=\"csrf-token\"]').attr('content'));\n        xhr.withCredentials = true;\n        formData.append('upload', fileLoader.file, fileLoader.fileName);\n        fileLoader.xhr.send(formData);\n\n        // Prevented the default behavior.\n        evt.stop();\n    });\n\n    // CKEDITOR LINEA ACCIÓN\n    CKEDITOR.replace('linea_accion', {\n        customConfig: '/assets/js/customs/ckeditor_add_project_config.js'\n    });\n\n    CKEDITOR.instances.linea_accion.on('fileUploadRequest', function (evt) {\n        var fileLoader = evt.data.fileLoader,\n            formData = new FormData(),\n            xhr = fileLoader.xhr;\n\n        xhr.open('POST', fileLoader.uploadUrl, true);\n        xhr.setRequestHeader('X-CSRF-TOKEN', $('meta[name=\"csrf-token\"]').attr('content'));\n        xhr.withCredentials = true;\n        formData.append('upload', fileLoader.file, fileLoader.fileName);\n        fileLoader.xhr.send(formData);\n\n        // Prevented the default behavior.\n        evt.stop();\n    });\n\n    // CKEDITOR FUNDAMENTACIÓN\n    CKEDITOR.replace('fundamentacion', {\n        customConfig: '/assets/js/customs/ckeditor_add_project_config.js'\n    });\n\n    CKEDITOR.instances.fundamentacion.on('fileUploadRequest', function (evt) {\n        var fileLoader = evt.data.fileLoader,\n            formData = new FormData(),\n            xhr = fileLoader.xhr;\n\n        xhr.open('POST', fileLoader.uploadUrl, true);\n        xhr.setRequestHeader('X-CSRF-TOKEN', $('meta[name=\"csrf-token\"]').attr('content'));\n        xhr.withCredentials = true;\n        formData.append('upload', fileLoader.file, fileLoader.fileName);\n        fileLoader.xhr.send(formData);\n\n        // Prevented the default behavior.\n        evt.stop();\n    });\n\n    // CKEDITOR PROPÓSITO\n    CKEDITOR.replace('proposito', {\n        customConfig: '/assets/js/customs/ckeditor_add_project_config.js'\n    });\n\n    CKEDITOR.instances.proposito.on('fileUploadRequest', function (evt) {\n        var fileLoader = evt.data.fileLoader,\n            formData = new FormData(),\n            xhr = fileLoader.xhr;\n\n        xhr.open('POST', fileLoader.uploadUrl, true);\n        xhr.setRequestHeader('X-CSRF-TOKEN', $('meta[name=\"csrf-token\"]').attr('content'));\n        xhr.withCredentials = true;\n        formData.append('upload', fileLoader.file, fileLoader.fileName);\n        fileLoader.xhr.send(formData);\n\n        // Prevented the default behavior.\n        evt.stop();\n    });\n\n    // CKEDITOR COMPETENCIA\n    CKEDITOR.replace('competencia', {\n        customConfig: '/assets/js/customs/ckeditor_add_project_config.js'\n    });\n\n    CKEDITOR.instances.competencia.on('fileUploadRequest', function (evt) {\n        var fileLoader = evt.data.fileLoader,\n            formData = new FormData(),\n            xhr = fileLoader.xhr;\n\n        xhr.open('POST', fileLoader.uploadUrl, true);\n        xhr.setRequestHeader('X-CSRF-TOKEN', $('meta[name=\"csrf-token\"]').attr('content'));\n        xhr.withCredentials = true;\n        formData.append('upload', fileLoader.file, fileLoader.fileName);\n        fileLoader.xhr.send(formData);\n\n        // Prevented the default behavior.\n        evt.stop();\n    });\n\n    // CKEDITOR METODOLOGÍA\n    CKEDITOR.replace('metodologia', {\n        customConfig: '/assets/js/customs/ckeditor_add_project_config.js'\n    });\n\n    CKEDITOR.instances.metodologia.on('fileUploadRequest', function (evt) {\n        var fileLoader = evt.data.fileLoader,\n            formData = new FormData(),\n            xhr = fileLoader.xhr;\n\n        xhr.open('POST', fileLoader.uploadUrl, true);\n        xhr.setRequestHeader('X-CSRF-TOKEN', $('meta[name=\"csrf-token\"]').attr('content'));\n        xhr.withCredentials = true;\n        formData.append('upload', fileLoader.file, fileLoader.fileName);\n        fileLoader.xhr.send(formData);\n\n        // Prevented the default behavior.\n        evt.stop();\n    });\n})","var FormEditProject = (function(){\n\n    var el = {\n        tableListProjects: '#table-list-projects',\n        modalEditProject: '#edit-project-modal',\n        formEditProject: '#form-edit-project',\n        formListReferences: '#form-list-references',\n        selectEspecialidad: '#especialidad',\n        tbodyReferenceContainer: \"#references-container\",\n        inputAutor: '#autor',\n        inputNombreProyecto: '#nombre_proyecto',\n        btnAddReference: '.btn-add-reference',\n        btnDeleteReference: '.btn-delete-reference',\n    };\n\n    var dom = {\n        find: jQuery,\n        modalEditProject: $(el.modalEditProject),\n        formEditProject: $(el.formEditProject),\n        formListReferences: $(el.formListReferences),\n        tbodyReferenceContainer: $(el.tbodyReferenceContainer),\n        selectEspecialidad: $(el.selectEspecialidad),\n        inputAutor: $(el.inputAutor),\n        inputNombreProyecto: $(el.inputNombreProyecto),\n        editor: CKEDITOR.instances,\n    };\n\n    var validators = {};\n\n    var events = {\n        showModal: function (evt) {\n            $(this).modal({\n                show: true,\n                backdrop: 'static',\n                keyboard: false\n            })\n        },\n        resetModal: function (evt) {\n            dom.tbodyReferenceContainer.html(\"\");\n        },\n        loadForm: function (evt, data) {\n            if (data) {\n                dom.formEditProject.get(0).pid.value = data.id;\n                dom.selectEspecialidad.val(data.especialidad_cod).trigger('change');\n                dom.inputNombreProyecto.val(data.nombre_proyecto);\n                dom.editor.descripcion.setData(data.descripcion)\n                dom.editor.descripcion.updateElement();\n                dom.editor.linea_accion.setData(data.linea_accion);\n                dom.editor.linea_accion.updateElement();\n                dom.editor.fundamentacion.setData(data.fundamentacion);\n                dom.editor.fundamentacion.updateElement();\n                dom.editor.proposito.setData(data.proposito);\n                dom.editor.proposito.updateElement();\n                dom.editor.competencia.setData(data.competencia);\n                dom.editor.competencia.updateElement();\n                dom.editor.metodologia.setData(data.metodologia);\n                dom.editor.metodologia.updateElement();\n\n                $.each(data.referencias, function (x, ref) {\n                    dom.tbodyReferenceContainer.trigger('createReference', ref);\n                });\n                // INIT EVENT\n                dom.find(el.btnAddReference).on('click', events.btnAddReferenceEvent);\n                dom.find(el.btnDeleteReference).on('click', events.btnDeleteReferenceEvent);\n                // SHOW MODAL\n                FormEditProject.dom.modalEditProject.trigger('showModal');\n            }\n        },\n        createReference: function (evt, data) {\n            var rows = $(this).children('tr').length;\n            var struct = `<tr class=\"reference\" data-reference-id=\"${data.id}\">\n                        <td>\n                            <input type=\"text\" class=\"form-control\" name=\"references[]\" id=\"reference_${(rows + 1)}\" value=\"${data.referencia}\" placeholder=\"Referencia...\">\n                            <input type=\"text\" name=\"reference_id[]\" value=\"${data.id}\" style=\"display:none\">\n                            <label id=\"reference_${(rows + 1)}-error\" class=\"error\" for=\"reference_${(rows + 1)}\" style=\"display:none;\"></label>\n                        </td>\n                        <td class=\"buttons\" style=\"width:52px;\">\n                            <button type=\"button\" class=\"btn btn-box-tool btn-delete-reference\"><i class=\"fa fa-remove\"></i></button>\n                            <button type=\"button\" class=\"btn btn-box-tool btn-add-reference\"><i class=\"fa fa-plus\"></i></button>\n                        </td>\n                    </tr>`;\n            $(struct).appendTo(this);\n        },\n        btnAddReferenceEvent: function (evt) {\n            var row = $(this).parents('tr');\n            var rows = dom.tbodyReferenceContainer.children('tr').length;\n            var reference = $(this).parents('tr').clone(true);\n            reference.get(0).dataset.referenceId = \"\";\n            reference.find('input').first().val(\"\").attr('id', 'reference_' + (rows + 1)).removeClass('error');\n            reference.find('[name=\"reference_id[]\"]').val(\"\");\n            reference.find('label.error').remove();\n            reference.insertAfter(row);\n        },\n        btnDeleteReferenceEvent: function (evt) {\n            var row = $(this).parents('tr');\n            var reference_id = row.get(0).dataset.referenceId;\n            if (dom.tbodyReferenceContainer.children('tr').length == 1) {\n                row.find('input').val(\"\");\n                return;\n            }\n\n            if (reference_id !== \"\") {\n                swal({\n                    title: \"Estas seguro?\",\n                    text: \"Esta acción no se podrá deshacer.<br><br>\",\n                    html: true,\n                    type: \"warning\",\n                    showCancelButton: true,\n                    confirmButtonColor: \"#DD6B55\",\n                    confirmButtonText: \"Si, eliminar!\",\n                    closeOnConfirm: false\n                },\n                    function () {\n                        Pace.track(function () {\n                            // Ajax request\n                            $.ajax({\n                                url: '/admin/profesor/project/reference/delete/' + reference_id,\n                                type: 'GET',\n                                dataType: 'JSON',\n                                beforeSend: function () {\n                                    swal.disableButtons();\n                                },\n                                success: function (rs) {\n                                    if (rs.response == \"ok\") {\n                                        swal(\"Eliminado!\", \"Los datos se han eliminado con éxito.\", \"success\");\n                                        row.remove();\n                                        // REFRESH TABLE\n                                        dom.find(el.tableListProjects).DataTable().ajax.reload();\n                                    }\n                                },\n                                error: function (jqXHR) {\n                                    Utils.displayErrors(jqXHR);\n                                }\n                            })\n                        })\n                        // /.PACE\n                    })\n            } else {\n                row.remove();\n            }\n        },\n        initSelectEspecialidades: function (evt, data) {\n            dom.selectEspecialidad.select2({\n                data: data.especialidades\n            })\n        }\n    };\n\n    var subscribeEvents = function () {\n        dom.modalEditProject.on('showModal', events.showModal);\n        dom.modalEditProject.on('hide.bs.modal', events.resetModal);\n        dom.formEditProject.on('loadForm', events.loadForm);\n        dom.tbodyReferenceContainer.on('createReference', events.createReference);\n        dom.selectEspecialidad.on('initSelectEspecialidades', events.initSelectEspecialidades);\n    }\n\n    var validate = {\n        callback: function (form) {\n            var data = dom.formEditProject.serialize();\n            var objData = {\n                descripcion_up: dom.editor.descripcion.getData(),\n                linea_accion_up: dom.editor.linea_accion.getData(),\n                fundamentacion_up: dom.editor.fundamentacion.getData(),\n                proposito_up: dom.editor.proposito.getData(),\n                competencia_up: dom.editor.competencia.getData(),\n                metodologia_up: dom.editor.metodologia.getData(),\n            }\n            data += \"&\" + $.param(objData);\n            var project_id = dom.formEditProject.get(0).pid.value;\n            \n            Pace.track(function () {\n                $.ajax({\n                    url: '/admin/profesor/project/edit/' + project_id,\n                    data: data,\n                    type: 'POST',\n                    dataType: 'JSON',\n                })\n                .done(function(rs) {\n                    if (rs.response == 'ok') {\n                        Utils.initNoty('Se ha actualizado correctamente.', 'success');\n                        // HIDEN MODAL\n                        dom.modalEditProject.modal('hide');\n                        // REFRESH TABLE\n                        dom.find(el.tableListProjects).DataTable().ajax.reload();\n                    }\n                })\n                .fail(function(jqXHR) {\n                    Utils.displayErrors(jqXHR);\n                })\n            });\n        },\n        rules: {\n            nombre_proyecto: {\n                required: true,\n            },\n            descripcion: {\n                required: true,\n            },\n            linea_accion: {\n                required: true,\n            },\n            fundamentacion: {\n                required: true,\n            },\n            proposito: {\n                required: true,\n            },\n            competencia: {\n                required: true,\n            },\n            metodologia: {\n                required: true,\n            },\n            'recursos[]': {\n                required: true\n            },\n            'references[]': {\n                required: true\n            },\n        }\n    }\n\n    var initFormFun = function () {}\n\n    var initializer = function () {\n        subscribeEvents();\n        Utils.initValidateForm(dom.formEditProject.get(0), validate.callback, validate.rules);\n    }\n\n    return {\n        initializer: initializer,\n        el: el,\n        dom: dom,\n        events: events\n    }\n})()\n$(document).ready(function () {\n    FormEditProject.initializer();\n});"]}