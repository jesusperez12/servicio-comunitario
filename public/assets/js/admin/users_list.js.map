{"version":3,"sources":["users_list.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"users_list.js","sourcesContent":["$(document).ready(function() {\n    var table_list_users = null;\n    Pace.track(function() {\n        table_list_users = $(\"#table-list-users\").DataTable({\n            ajax: '/admin/user/all',\n            dom: `<'row'<'col-sm-6 users-list-items'f><'col-sm-4'<'#searchFilterUsers'>>>\n                  <'row'<'col-sm-12'tr>>\n                  <'row'<'col-sm-5'i><'col-sm-7'p>>`,\n            drawCallback: function(settings) {\n                var api = this.api();\n                $.each(api.rows().nodes(), function(x, tr){\n                    $(tr).find('[data-toggle=tooltip]').tooltip();\n                    // FUNCTION LOAD USUARIO\n                    $(tr).find('.btn-load-usuario').off('click').on('click', function(e) {\n                        e.preventDefault();\n                        var id = $(this).data('id');\n                        var tr_n = $(tr).closest('tr');\n                        var row = api.row( tr_n );\n                        if($(this).hasClass('active')) {\n                            row.child.hide(\"slow\");\n                            $(this).removeClass('active');\n                            return;\n                        }\n                        $(this).parent().find('a').removeClass('active');\n                        $(this).addClass('active');\n                        if(row.child.isShown()){\n                            row.child.hide(\"slow\");\n                        }\n                        Pace.track(function() {\n                            $.ajax({\n                                url: \"/admin/user/view/\" + id,\n                                type: \"GET\",\n                                dataType: \"JSON\",\n                                success: function(json) {\n                                    if(json.data) {\n                                        row.child( show_view_usuario(json.data) ).show();\n                                        tr_n.next().find(\".view_html\").slideDown(200);\n                                        tr_n.next().find('td').first().css({ 'border-top':'2px solid #4879BE','border-bottom':'2px solid #4879BE','background-color':'#B6D7FF' });\n                                    }\n                                }\n                            })\n                        })\n                    });\n                    // FUNCTION EDIT USUARIO\n                    $(tr).find('.btn-edit-usuario').off('click').on('click', function(e) {\n                        e.preventDefault();\n                        var id = $(this).data('id');\n                        var tr_n = $(tr).closest('tr');\n                        var row = api.row( tr_n );\n                        $(this).parent().find('a').removeClass('active');\n                        if(row.child.isShown()){\n                            row.child.hide(\"slow\");\n                        }\n                        Pace.track(function() {\n                            $.ajax({\n                                url: \"/admin/user/edit/\" + id,\n                                type: \"GET\",\n                                dataType: \"json\",\n                                success: function(json) {\n                                    $(\"#editUser\").modal({\n                                        show: true,\n                                        backdrop: 'static',\n                                        keyboard: false\n                                    })\n                                    // Load user data\n                                    var form = $(\"#editUser\").find(\"form\")[0];\n                                    form.user_id.value = json.data.id;\n                                    form.ci.value = json.data.ci;\n                                    form.firstname.value = json.data.firstname;\n                                    form.middlename.value = json.data.middlename;\n                                    form.primary_lastname.value = json.data.primary_lastname;\n                                    form.second_lastname.value = json.data.second_lastname;\n                                    if(json.data.date_birth != null) {\n                                        $(form.date_birth).datepicker('setDate',new Date(json.data.date_birth));\n                                    }\n                                    form.address.value = json.data.address;\n                                    if(parseInt(json.data.status) == 0) {\n                                        $(form.active).iCheck('check');\n                                    }else{\n                                        $(form.pending).iCheck('check');\n                                    }\n                                    if(parseInt(json.data.gender) == 0) {\n                                        $(form.woman).iCheck('check');\n                                    }else{\n                                        $(form.man).iCheck('check');\n                                    }\n                                    \n                                    $(form.role_id).val(json.data.role_id).trigger('change');\n                                    // $(form.sede_id).val(json.data.sede_id).trigger('change');\n                                    $(form.state).val(json.data.state).trigger(\"change\", {locality: json.data.locality, province: json.data.province});\n                                    $(form.speciality).val(json.data.especialidad_cod).trigger(\"change\");\n                                    form.email.value = json.data.email;\n                                    // $(form).find(\"[name='codes[]']\").children().removeAttr('selected');\n                                    // $(form).find(\"[name='codes[]']\").trigger('reset');\n                                    $.each(json.data.phones, function(x, phone) {\n                                        if(x == 0) {\n                                            $(form).find(\"[name='codes[]']\").val(phone.code_id);\n                                            form.phones.value = phone.number;\n                                            $(form).find(\"[name='phones_id[]']\").val(phone.id);\n                                        }else{\n                                            global.add_phones(phone);\n                                        }\n                                    })\n                                }\n                            })\n                        })\n                    });\n                    // FUNCTION SUSPENDER USUARIO\n                    $(tr).find('.btn-suspend-usuario').off('click').on('click', function(e) {\n                        e.preventDefault();\n                        var id = $(this).data('id');\n                        var tr_n = $(tr).closest('tr');\n                        var row = api.row( tr_n );\n                        $(this).parent().find('a').removeClass('active');\n                        if(row.child.isShown()){\n                            row.child.hide(\"slow\");\n                        }\n                        swal({\n                            title: \"Estas seguro?\",\n                            text: \"¿ Realmente desea suspender usuario ?.\",\n                            type: \"warning\",\n                            showCancelButton: true,\n                            confirmButtonColor: \"#DD6B55\",\n                            confirmButtonText: \"Si, suspender!\",\n                            closeOnConfirm: false\n                        },\n                        function(){\n                            Pace.track(function() {\n                                // Ajax request\n                                $.ajax({\n                                    url: '/admin/user/suspend/' + id,\n                                    type: 'GET',\n                                    dataType: 'JSON',\n                                    beforeSend: function() {\n                                        swal.disableButtons();\n                                    },\n                                    success: function(json) {\n                                        if(json.response == \"ok\")\n                                        {\n                                            swal(\"Eliminado!\", \"El usuario ahora se encuentra suspendido.\", \"success\");\n                                            table = $(\"#table-list-users\").DataTable();\n                                            table.ajax.reload();\n                                        }\n                                    },\n                                    error: function(jqXHR) {\n                                        Utils.displayErrors(jqXHR);\n                                    }\n                                })\n                            })\n                            // /.PACE\n                        })\n                        // /.FUNCTION\n                    });\n                    // FUNCTION ACTIVAR USUARIO\n                    $(tr).find('.btn-active-usuario').off('click').on('click', function(e) {\n                        e.preventDefault();\n                        var id = $(this).data('id');\n                        var tr_n = $(tr).closest('tr');\n                        var row = api.row( tr_n );\n                        $(this).parent().find('a').removeClass('active');\n                        if(row.child.isShown()){\n                            row.child.hide(\"slow\");\n                        }\n                        swal({\n                            title: \"Estas seguro?\",\n                            text: \"¿ Realmente desea activar usuario ?.\",\n                            type: \"warning\",\n                            showCancelButton: true,\n                            confirmButtonColor: \"#DD6B55\",\n                            confirmButtonText: \"Si, activar!\",\n                            closeOnConfirm: false\n                        },\n                        function(){\n                            Pace.track(function() {\n                                // Ajax request\n                                $.ajax({\n                                    url: '/admin/user/active/' + id,\n                                    type: 'GET',\n                                    dataType: 'JSON',\n                                    beforeSend: function() {\n                                        swal.disableButtons();\n                                    },\n                                    success: function(json) {\n                                        if(json.response == \"ok\")\n                                        {\n                                            swal(\"Activado!\", \"El usuario ahora se encuentra activo.\", \"success\");\n                                            table = $(\"#table-list-users\").DataTable();\n                                            table.ajax.reload();\n                                        }\n                                    },\n                                    error: function(jqXHR) {\n                                        Utils.displayErrors(jqXHR);\n                                    }\n                                })\n                            })\n                            // /.PACE\n                        })\n                        // /.FUNCTION\n                    });\n                    // FUNCTION ELIMINAR USUARIO\n                    $(tr).find('.btn-delete-usuario').off('click').on('click', function(e) {\n                        e.preventDefault();\n                        var id = $(this).data('id');\n                        var tr_n = $(tr).closest('tr');\n                        var row = api.row( tr_n );\n                        $(this).parent().find('a').removeClass('active');\n                        if(row.child.isShown()){\n                            row.child.hide(\"slow\");\n                        }\n                        swal({\n                            title: \"Estas seguro?\",\n                            text: \"¿ Realmente desea eliminar el usuario ?.\",\n                            type: \"warning\",\n                            showCancelButton: true,\n                            confirmButtonColor: \"#DD6B55\",\n                            confirmButtonText: \"Si, eliminar!\",\n                            closeOnConfirm: false\n                        },\n                        function(){\n                            Pace.track(function() {\n                                // Ajax request\n                                $.ajax({\n                                    url: '/admin/user/delete/' + id,\n                                    type: 'GET',\n                                    dataType: 'JSON',\n                                    beforeSend: function() {\n                                        swal.disableButtons();\n                                    },\n                                    success: function(json) {\n                                        if(json.response == \"ok\")\n                                        {\n                                            swal(\"Eliminado!\", \"El usuario se ha eliminado con éxito.\", \"success\");\n                                            table = $(\"#table-list-users\").DataTable();\n                                            table.ajax.reload();\n                                        }\n                                    },\n                                    error: function(jqXHR) {\n                                        Utils.displayErrors(jqXHR);\n                                    }\n                                })\n                            })\n                            // /.PACE\n                        })\n                        // /.FUNCTION\n                    });\n                    // FUNCTION ARCHIVAR USUARIO\n                    $(tr).find('.btn-archive-usuario').off('click').on('click', function (e) {\n                        e.preventDefault();\n                        var id = $(this).data('id');\n                        var tr_n = $(tr).closest('tr');\n                        var row = api.row(tr_n);\n                        $(this).parent().find('a').removeClass('active');\n                        if (row.child.isShown()) {\n                            row.child.hide(\"slow\");\n                        }\n                        swal({\n                            title: \"Estas seguro?\",\n                            text: `El usuario pasará al historial de profesores.<br><br><p class=\"sugerencia_error\">Además, no podrá ser editado, suspendido o eliminado y no tendrá acceso al sistema.</p><br><br>`,\n                            html: true,\n                            type: \"warning\",\n                            showCancelButton: true,\n                            confirmButtonColor: \"#DD6B55\",\n                            confirmButtonText: \"Si, archivar!\",\n                            closeOnConfirm: false\n                        },\n                        function () {\n                            Pace.track(function () {\n                                // Ajax request\n                                $.ajax({\n                                    url: '/admin/user/archive/' + id,\n                                    type: 'GET',\n                                    dataType: 'JSON',\n                                    beforeSend: function () {\n                                        swal.disableButtons();\n                                    },\n                                    success: function (json) {\n                                        if (json.response == \"ok\") {\n                                            swal(\"Archivado!\", \"El usuario ahora se encuentra en el historial de profesores.\", \"success\");\n                                            table = $(\"#table-list-users\").DataTable();\n                                            table.ajax.reload();\n                                        }\n                                    },\n                                    error: function (jqXHR) {\n                                        Utils.displayErrors(jqXHR);\n                                    }\n                                })\n                            })\n                            // /.PACE\n                        })\n                        // /.FUNCTION\n                    });\n                    // FUNCTION RESTORE USUARIO\n                    $(tr).find('.btn-restore-usuario').off('click').on('click', function (e) {\n                        e.preventDefault();\n                        var id = $(this).data('id');\n                        var tr_n = $(tr).closest('tr');\n                        var row = api.row(tr_n);\n                        $(this).parent().find('a').removeClass('active');\n                        if (row.child.isShown()) {\n                            row.child.hide(\"slow\");\n                        }\n                        swal({\n                            title: \"Estas seguro?\",\n                            text: `El usuario será restaurado y pasará al listado de profesores actuales.<br><br>`,\n                            html: true,\n                            type: \"warning\",\n                            showCancelButton: true,\n                            confirmButtonColor: \"#DD6B55\",\n                            confirmButtonText: \"Si, restaurar!\",\n                            closeOnConfirm: false\n                        },\n                            function () {\n                                Pace.track(function () {\n                                    // Ajax request\n                                    $.ajax({\n                                        url: '/admin/user/restore/' + id,\n                                        type: 'GET',\n                                        dataType: 'JSON',\n                                        beforeSend: function () {\n                                            swal.disableButtons();\n                                        },\n                                        success: function (json) {\n                                            if (json.response == \"ok\") {\n                                                swal(\"Restaurado!\", \"El usuario ahora se encuentra en el listadi de profesores actuales.\", \"success\");\n                                                table = $(\"#table-list-users\").DataTable();\n                                                table.ajax.reload();\n                                            }\n                                        },\n                                        error: function (jqXHR) {\n                                            Utils.displayErrors(jqXHR);\n                                        }\n                                    })\n                                })\n                                // /.PACE\n                            })\n                        // /.FUNCTION\n                    });\n                })\n            },\n            initComplete: function (settings, json) {\n                var api = this.api();\n                // FILTRO\n                $(\".users-list-items\").find('[type=search]').removeClass(\"input-sm\")\n                    .css({\n                        \"width\": \"100%\",\n                        \"margin-left\": 0\n                    })\n                    .parents(\"label\").css({\n                        \"width\": \"100%\"\n                    });\n                // SELECTS\n                var toggleSearch = `\n                            <select name=\"selectUser\" class=\"form-control\" id=\"selectUser\" style=\"width:100%;\">\n                                <option value=\"all\">Profesores actuales</option>\n                                <option value=\"history\">Historial de profesores</option>\n                            </select>`;\n                $(\"#searchFilterUsers\").html(toggleSearch);\n                $(\"#selectUser\").select2();\n                $(\"#selectUser\").on('change', function (e) {\n                    var type = e.target.value;\n                    var url = `/admin/user/${type}`;\n                    api.ajax.url(url).load();\n                });\n            },\n            ordering : false,\n            pagingType: \"simple_numbers\",\n            pageLength: 8,\n            lengthChange: false,\n            searching: true,\n            info: false,\n            displayStart: 0,\n            autoWidth: false,\n            language: {\n                loadingRecords: \"Cargando...\",\n                emptyTable:     \"No hay usuarios registrados por usted\",\n                info:           \"Mostrando _START_ a _END_ de _TOTAL_ registros\",\n                infoEmpty:      \"Mostrando 0 a 0 de 0 registros\",\n                zeroRecords:    \"No hay usuarios registrados...\",\n                search: \"\",\n                searchPlaceholder: \"Buscar...\",\n                infoFiltered: \" - filtrado para _MAX_ registros\",\n                paginate: {\n                    first:      \"Primero\",\n                    last:       \"Último\",\n                    next:       \"Siguiente\",\n                    previous:   \"Anterior\"\n                }\n            },\n            columns: [\n                {\n                    className: 'user-list text-right',\n                    data: null,\n                    render: function(data, type, row) {\n                        var gender = 'man';\n                        if(row.gender == 0) {\n                            gender = 'woman';\n                        }\n                        var phones = 'N/R';\n                        if(row.phones.length > 0) {\n                            phones = '';\n                            if(row.phones.length > 1){\n                                $.each(row.phones, function(k, phone) {\n                                    phones += '(' + phone.code.code + ') ' + phone.number + ', '\n                                })                            \n                            }else{\n                                $.each(row.phones, function(k, phone) {\n                                    phones += '(' + phone.code.code + ') ' + phone.number + '. '\n                                })\n                            }\n                        }\n                        var status = 'N/R';\n                        if(parseInt(row.status) == 0) {\n                            status = '<i class=\"fa fa-circle text-success\" data-toggle=\"tooltip\" data-placement=\"top\" data-containter=\"body\" data-title=\"Activo\"></i>';\n                        }else if(parseInt(row.status) == 1) {\n                            status = '<i class=\"fa fa-circle text-warning\" data-toggle=\"tooltip\" data-placement=\"top\" data-containter=\"body\" data-title=\"Pendiente\"></i>';\n                        }else if(parseInt(row.status) == 2) {\n                            status = '<i class=\"fa fa-circle text-danger\" data-toggle=\"tooltip\" data-placement=\"top\" data-containter=\"body\" data-title=\"Suspendido\"></i>';\n                        }\n                        if (row.deleted_at != null) {\n                            status = '<i class=\"fa fa-circle text-danger\" data-toggle=\"tooltip\" data-placement=\"top\" data-containter=\"body\" data-title=\"Inactivo\"></i>';\n                        }\n                        return '<div class=\"media\">'\n                        + '<div class=\"media-left\">'\n                        + '<a href=\"#\">'\n                        // + '<img class=\"media-object\" src=\"/assets/images/'+gender+'_user_icon.png\" alt=\"'+row.firstname+'\" style=\"width:54px;\">'\n                        + '<img class=\"media-object\" src=\"/assets/images/default-user-image.png\" alt=\"'+row.firstname+'\" style=\"width:54px;\">'\n                        + '</a>'\n                        + '</div>'\n                        + '<div class=\"media-body style-body\">'\n                            + `<div class=\"media-heading p-user-name\"><strong>${row.firstname.capitalize()} ${row.primary_lastname.capitalize()}</strong> <span class=\"icon-status\">${status}</span>&nbsp;<small><span class=\"label label-info\">(${row.role.role})</span>&nbsp;&nbsp;${(row.deleted_at != null) ? '<span class=\"label label-danger\">Inactivo</span>' : '' }</small></div>`\n                        + '<div class=\"p-data\"><strong>CÉDULA: </strong><span>'+ row.ci +'</span>. <strong>DIR: </strong><span>'+ row.address +', '+ row.locality +', '+ row.province +'</span></div>'\n                            + '<div class=\"p-data\"><strong>EMAIL: </strong><span>' + row.email + '</span>. <strong>TELF(S): </strong><span>' + phones +'</span> </div>'\n                        + '<div class=\"p-data\"><strong>SEDE: </strong><span>'+ row.sede.nombsede +'</span></div>'\n                        + '</div>'\n                        + '</div>';\n                    }\n                },\n                {\n                    className: 'p-actions',\n                    data: null,\n                    render: function(data, type, row) {\n                        var actions = \"<a href='#!' class='btn btn-default btn-xs btn-action btn-load-usuario' data-id='\"+ row.id +\"' data-toggle='tooltip' data-placement='top' data-title='Ver detalles del usuario'><i class='fa fa-eye'></i></a>\"\n                            + `<a href='#!' class='btn btn-warning btn-xs btn-action btn-edit-usuario ${(row.deleted_at != null) ? 'disabled' : ''}' data-id='${(row.deleted_at != null) ? '' : row.id}' data-toggle='tooltip' data-placement='top' data-title='Editar usuario'><i class='fa fa-pencil'></i></a>`;\n                        if(parseInt(row.status) == 0) {\n                            actions += `<a href='#!' class='btn btn-danger btn-xs btn-action btn-suspend-usuario ${(row.deleted_at != null) ? 'disabled' : ''}' data-id='${(row.deleted_at != null) ? '' :  row.id}' data-toggle='tooltip' data-placement='top' data-title='Suspender usuario'><i class='fa fa-power-off'></i></a>`;\n                        }else if(parseInt(row.status) != 0 && parseInt(row.status) != 1) {\n                            actions += `<a href='#!' class='btn btn-success btn-xs btn-action btn-active-usuario ${(row.deleted_at != null) ? 'disabled' : ''}' data-id='${(row.deleted_at != null) ? '' : row.id}' data-toggle='tooltip' data-placement='top' data-title='Activar usuario'><i class='fa fa-power-off'></i></a>`;\n                        }\n                        actions += `\n                        <a href='#!' class='btn btn-danger btn-xs btn-action btn-delete-usuario ${(row.deleted_at != null) ? 'disabled' : ''}' data-id='${(row.deleted_at != null) ? '' : row.id}' data-toggle='tooltip' data-placement='top' data-title='Enviar a la papelera'><i class='fa fa-trash'></i></a>\n                        `;\n                        if (row.deleted_at != null) {\n                            actions += `<a href='#!' class='btn btn-default btn-xs btn-action btn-restore-usuario' data-id='${row.id}' data-toggle='tooltip' data-placement='top' data-title='Restaurar usuario'><i class='fa fa-undo'></i></a>`;\n                        } else {\n                            actions += `<a href='#!' class='btn btn-default btn-xs btn-action btn-archive-usuario' data-id='${row.id}' data-toggle='tooltip' data-placement='top' data-title='Archivar usuario'><i class='fa fa-archive'></i></a>`;\n                        }\n                        return actions;\n                    }\n                }\n            ]\n        })\n    })\n\n    function show_view_usuario(data) {\n        \n        if(Object.keys(data).length > 0) {\n            var date_birth = (data.date_birth) ? moment(data.date_birth).format('DD/MM/YYYY') : 'N/R';\n            var status = 'N/R';\n            if(parseInt(data.status) == 0) {\n                status = 'Activo';\n            }else if(parseInt(data.status) == 1){\n                status = 'Pendiente';\n            }else if(parseInt(data.status) == 2){\n                status = 'Suspendido';\n            }\n            var gender = '';\n            if(parseInt(data.gender) == 0) {\n                gender = 'Femenino';\n            }else if(parseInt(data.gender) == 1){\n                gender = 'Masculino';\n            }\n            var proyecto = 'N/R';\n            if(data.proyecto) {\n                if(data.proyecto_id != null) {\n                    proyecto = data.proyecto.nombre_proyecto;\n                }\n            }\n            var speciality = 'N/R';\n            if(data.especialidad) {\n                speciality = data.especialidad;\n            }\n            var proyectos = '<span style=\"color:red;\">NO POSEE PROYECTOS REGISTRADOS.</span>';\n            if (data.proyectos.length) {\n                proyectos = '<ul>';\n                $.each(data.proyectos, function (x, proyecto) {\n                    proyectos += `<li>${proyecto.nombre_proyecto}</li>`;\n                })\n                proyectos += '</ul>';\n            }\n\n            var box = '<div class=\"view_html\" style=\"display: none;\">'\n                box += '<table class=\"table table-condensed table-bordered\" style=\"margin-bottom:-1px;\">'+\n                        '<tr class=\"view_info\">'+\n                            '<td colspan=\"4\" style=\"font-weight:bold;text-align:center;\">OTROS DATOS DEL USUARIO</td>'+\n                        '</tr>'+\n                        '<tr class=\"view_info\">'+\n                            '<td style=\"font-weight:bold;text-align:left;\">Especialidad:</td>'+\n                            '<td style=\"font-weight:bold;text-align:left;\">Fecha de nacimiento:</td>'+\n                            '<td style=\"font-weight:bold;text-align:left;\">Género:</td>'+\n                            '<td style=\"font-weight:bold;text-align:left;\">Status:</td>'+\n                        '</tr>'+\n                        '<tr>'+\n                            '<td>'+ speciality +'</td>'+\n                            '<td>'+ date_birth +'</td>'+\n                            '<td>'+ gender +'</td>'+\n                            '<td>'+ status +'</td>'+\n                        '</tr>'+\n                        `\n                        <tr class=\"view_info\">\n                            <td colspan=\"4\" style=\"font-weight:bold;text-align:center;\">PROYECTOS</td>\n                        </tr>\n                        <tr>\n                            <td colspan=\"4\">\n                                ${proyectos}\n                            </td>\n                        </tr>\n                        `\n                        '</table>'+\n                    '</div>';\n            return box;\n        }else{\n            return;\n        }\n    }\n\n    // Hiden modal edit user\n    $('#editUser').on('hide.bs.modal', function() {\n        $(this).find('form').trigger('reset');\n        // $(this).find('form').find(\"[name='codes[]']\").children().removeAttr('selected');\n        $(this).find('.optional-plus-phones').html(\"\");\n    })\n\n    // Activate link\n    var url = $(\"#url-active\").data(\"url-active\");\n    global.url_active(url);\n})"]}