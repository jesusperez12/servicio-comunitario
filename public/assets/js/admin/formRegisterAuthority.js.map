{"version":3,"sources":["formRegisterAuthority.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"formRegisterAuthority.js","sourcesContent":["var FormRegisterAuthority = (function(){\n\n    var el = {\n        formRegisterAuthority: \"#form-register-authority\", // ID\n        modalRegisterAuthoriy: \"#registerAuthoriy\", // ID\n    };\n\n    var dom = {\n        find: jQuery,\n        formRegisterAuthority: $(el.formRegisterAuthority),\n        modalRegisterAuthoriy: $(el.modalRegisterAuthoriy),\n    };\n\n    var events = {};\n\n    var subscribeEvents = function () {}\n\n   var validate = {\n       callback: function (form) {\n           var data = $(form).serialize();\n           $rq = $.ajax({\n               url: '/admin/authorities',\n               data: data,\n               type: 'POST',\n               dataType: 'JSON',\n           })\n           .done(function (rs) {\n                if (rs.response == 'ok') {\n                    noty({\n                        text: \"Se ha guardado correctamente.\",\n                        type: 'success',\n                        theme: \"relax\",\n                        timeout: 2000, // [integer|boolean] delay for closing event in milliseconds. Set false for sticky notifications\n                        progressBar: true, // [boolean] - displays a progress bar\n                        template: '<div class=\"noty_message\"><span class=\"fa fa-check\"></span> <span class=\"noty_text\"></span><div class=\"noty_close\"></div></div>',\n                        animation: {\n                            open: 'animated bounceInDown', // Animate.css class names\n                            close: 'animated bounceOutUp', // Animate.css class names\n                            easing: 'swing', // unavailable - no need\n                            speed: 500 // unavailable - no need\n                        }\n                    })\n\n                    dom.find(\"#cargo_authority_\" + rs.authority.cargo_id).trigger('reloadBoxAuthority', rs.authority);\n\n                    dom.modalRegisterAuthoriy.modal('hide');\n                }\n           })\n           .fail(function (jqXHR) {\n               var errors = [];\n               if (jqXHR.responseJSON) {\n                   $.each(jqXHR.responseJSON, function (x, error) {\n                       $.each(error, function (x, o) {\n                           errors.push(o);\n                       })\n                   })\n\n                   if (errors.length > 0) {\n                       var html = '<ul class=\"content-icons-errors\">';\n                       $.each(errors, function (x, error) {\n                           html += '<li class=\"icons-errors\">'\n                               + error;\n                           + '</li>';\n                       })\n                       html += '</ul>';\n\n                       swal({\n                           title: 'Han ocurrido los siguientes errores',\n                           text: html,\n                           html: true\n                       })\n                   }\n               }\n           })\n       },\n       rules: {\n           nombre_autoridad: {\n               required: true\n           }\n       }\n   }\n\n    var initializer = function () {\n        Utils.initValidateForm(dom.formRegisterAuthority[0], validate.callback, validate.rules);\n        // Activate link\n        var url = $(\"#url-active\").data(\"url-active\");\n        global.url_active(url);\n    }\n\n    return {\n        initializer: initializer\n    }\n})()\n$(document).ready(function () {\n    FormRegisterAuthority.initializer();\n});"]}